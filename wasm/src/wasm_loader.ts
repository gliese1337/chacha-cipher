import hex from './wasm';

const high_map: {[key: string]: number } = {
  0: 0x00, 1: 0x10, 2: 0x20, 3: 0x30,
  4: 0x40, 5: 0x50, 6: 0x60, 7: 0x70,
  8: 0x80, 9: 0x90, a: 0xa0, b: 0xb0,
  c: 0xc0, d: 0xd0, e: 0xe0, f: 0xf0,
}

const low_map: {[key: string]: number } = {
  0: 0x00, 1: 0x01, 2: 0x02, 3: 0x03,
  4: 0x04, 5: 0x05, 6: 0x06, 7: 0x07,
  8: 0x08, 9: 0x09, a: 0x0a, b: 0x0b,
  c: 0x0c, d: 0x0d, e: 0x0e, f: 0x0f,
}

const bytes = new Uint8Array(hex.length * 2);
for (let i = 0, j = 0; j < hex.length; i++, j+=2) {
  bytes[i] = high_map[hex[j]] | low_map[hex[j+1]];
}

export default WebAssembly.compile(bytes);